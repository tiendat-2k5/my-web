<div style="text-align: center; font-family: sans-serif; display: grid; grid-template-columns: 1 standalone; gap: 10px;">
  
  <div style="margin-bottom: 15px;">
    <button onclick="controlLamp('ON')" style="background-color: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; width: 45%;">Báº¬T</button>
    <button onclick="controlLamp('OFF')" style="background-color: #f44336; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; width: 45%;">Táº®T</button>
  </div>

  <div style="display: flex; justify-content: space-around;">
    <button onclick="controlLamp('STUDY')" style="background-color: #2196F3; color: white; border: none; padding: 15px; border-radius: 50%; cursor: pointer;">ğŸ“– Há»c</button>
    <button onclick="controlLamp('RELAX')" style="background-color: #9C27B0; color: white; border: none; padding: 15px; border-radius: 50%; cursor: pointer;">ğŸ® ChÆ¡i</button>
  </div>

  <p id="status" style="color: #888; margin-top: 10px; font-size: 12px;">Äiá»u khiá»ƒn Ä‘Ã¨n Neon trÃªn bÃ n há»c"</p>
</div>

<script>
// ThÃ´ng sá»‘ tá»« áº£nh nRF Connect cá»§a báº¡n
const SERVICE_UUID = '0000fff0-0000-1000-8000-00805f9b34fb'; 
const CHARACTERISTIC_UUID = '0000fff3-0000-1000-8000-00805f9b34fb'; 

// CÃC MÃƒ HEX TÆ¯Æ NG á»¨NG (Báº¡n hÃ£y thay sá»‘ chÃ­nh xÃ¡c vÃ o Ä‘Ã¢y)
const HEX_CODES = {
  'ON':    [0x7E, 0x04, 0x01, 0x00], // VÃ­ dá»¥ mÃ£ Báº­t
  'OFF':   [0x7E, 0x04, 0x00, 0x00], // VÃ­ dá»¥ mÃ£ Táº¯t
  'STUDY': [0x7E, 0x05, 0x03, 0x00, 0xFF, 0x00], // VÃ­ dá»¥ mÃ u Xanh lÃ¡
  'RELAX': [0x7E, 0x05, 0x03, 0xFF, 0x00, 0xFF]  // VÃ­ dá»¥ mÃ u TÃ­m
};

async function controlLamp(mode) {
  const statusEl = document.getElementById('status');
  const command = HEX_CODES[mode];

  try {
    statusEl.innerText = "Äang káº¿t ná»‘i Bluetooth...";
    const device = await navigator.bluetooth.requestDevice({
      filters: [{ services: [SERVICE_UUID.toLowerCase()] }]
    });

    const server = await device.gatt.connect();
    const service = await server.getPrimaryService(SERVICE_UUID.toLowerCase());
    const characteristic = await service.getCharacteristic(CHARACTERISTIC_UUID.toLowerCase());

    statusEl.innerText = "Äang chuyá»ƒn cháº¿ Ä‘á»™: " + mode;
    await characteristic.writeValue(new Uint8Array(command));

    statusEl.innerText = "ÄÃ£ chuyá»ƒn sang " + mode;
    setTimeout(() => device.gatt.disconnect(), 1000);

  } catch (error) {
    statusEl.innerText = "Lá»—i: " + error.message;
  }
}
</script>
